<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Zagadka ZHR ‚Äî Morse ‚Üí GA-DE-RY-PO-LU-KI</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #1e3c72, #2a5298);
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
    }
    .card {
      background: rgba(255,255,255,0.08);
      backdrop-filter: blur(12px);
      border-radius: 20px;
      padding: 32px;
      max-width: 900px;
      width: 100%;
      box-shadow: 0 8px 30px rgba(0,0,0,.4);
      text-align: center;
      animation: fadeIn 1s ease;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    h1 { margin-top: 0; font-size: 28px; }
    p.lead { color: #d0d6f5; }
    pre {
      background: rgba(0,0,0,.4);
      padding: 16px;
      border-radius: 12px;
      overflow-x: auto;
      font-family: monospace;
      font-size: 16px;
      margin: 20px 0;
      color: #aee1ff;
      text-align: left;
    }
    input {
      padding: 12px;
      border-radius: 10px;
      border: none;
      outline: none;
      background: rgba(255,255,255,.15);
      color: #fff;
      width: 220px;
      font-size: 16px;
      margin-top: 10px;
    }
    button {
      padding: 12px 20px;
      margin-left: 10px;
      border: none;
      border-radius: 10px;
      background: linear-gradient(135deg, #6c8cff, #4a6ee0);
      color: white;
      cursor: pointer;
      font-weight: bold;
      font-size: 15px;
      transition: transform .15s ease, box-shadow .15s ease;
    }
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(0,0,0,.3);
    }
    .msg { margin-top: 15px; font-weight: bold; font-size: 16px; }
    .ok { color: #2ecc71; white-space: pre-line; }
    .no { color: #ff5c7a; }
    a { color: #ffd966; text-decoration: underline; }
    a:hover { color: #fff176; }
  </style>
</head>
<body>
  <div class="card">
    <h1>üîê Zaszyfrowane pytanie</h1>
    <p class="lead">Najpierw odszyfruj Morse‚Äôa (litery = ‚Äû/‚Äù, s≈Çowa = ‚Äû//‚Äù), potem u≈ºyj szyfru GA-DE-RY-PO-LU-KI.</p>
    <pre id="cipher"></pre>

    <div>
      <input id="odpowiedz" type="text" placeholder="Twoja odpowied≈∫‚Ä¶" />
      <button id="sprawdz">Sprawd≈∫</button>
    </div>
    <div class="msg" id="komunikat"></div>
  </div>

  <script>
    // ===== KONFIG =====
    const PYTANIE_ORG = "Kt√≥ra to by≈Ça pielgrzymka ZHR?";
    const POPRAWNE = ["43"];
    const MSG_NO = "Nie tym razem. Spr√≥buj jeszcze raz.";

    // Tekst, kt√≥ry ma siƒô pojawiƒá po poprawnej odpowiedzi
    const TEKST_HTML = `üì∏ Link do zdjƒôƒá znajdziesz w starym po≈õcie z pielgrzymki ZHR.<br>
    Tu <a href="https://www.instagram.com/pielgrzymkazhr/" target="_blank">Instagram pielgrzymki</a>`;

    // ===== FUNKCJE =====
    const stripDiacritics = s => s.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
    const GADERY = { G:"A", A:"G", D:"E", E:"D", R:"Y", Y:"R", P:"O", O:"P", L:"U", U:"L", K:"I", I:"K" };
    const applyGadery = s => s.split("").map(ch => {
      const up = ch.toUpperCase();
      if (GADERY[up]) {
        const mapped = GADERY[up];
        return (ch === ch.toUpperCase()) ? mapped : mapped.toLowerCase();
      }
      return ch;
    }).join("");

    const MORSE = {
      "A":".-","B":"-...","C":"-.-.","D":"-..","E":".","F":"..-.","G":"--.","H":"....","I":"..","J":".---",
      "K":"-.-","L":".-..","M":"--","N":"-.","O":"---","P":".--.","Q":"--.-","R":".-.","S":"...","T":"-",
      "U":"..-","V":"...-","W":".--","X":"-..-","Y":"-.--","Z":"--..",
      "0":"-----","1":".----","2":"..---","3":".--..","4":"....-","5":".....",
      "6":"-....","7":"--...","8":"---..","9":"----.",
      "?":"..--.."
    };

    const toMorse = s => {
      return s.split(" ").map(word =>
        word.split("").map(ch => {
          const up = ch.toUpperCase();
          return MORSE[up] || "";
        }).filter(Boolean).join(" / ")
      ).join(" // ");
    };

    // Generowanie zagadki
    const pytanieBase = stripDiacritics(PYTANIE_ORG);
    const poGadery = applyGadery(pytanieBase);
    const morseFinal = toMorse(poGadery);
    document.getElementById("cipher").textContent = morseFinal;

    // Sprawdzanie odpowiedzi
    const input = document.getElementById("odpowiedz");
    const msg = document.getElementById("komunikat");

    function checkAnswer() {
      const val = (input.value || "").trim();
      if (POPRAWNE.includes(val)) {
        msg.innerHTML = TEKST_HTML;
        msg.className = "msg ok";
      } else {
        msg.textContent = MSG_NO;
        msg.className = "msg no";
      }
    }

    document.getElementById("sprawdz").addEventListener("click", checkAnswer);
    input.addEventListener("keydown", e => { if (e.key === "Enter") checkAnswer(); });
  </script>
</body>
</html>
