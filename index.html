<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Zagadka: Morse ‚Üí GA-DE-RY-PO-LU-KI</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #0f1221;
      color: #e7e9ff;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
    }
    .card {
      background: #161a2f;
      border-radius: 16px;
      padding: 24px;
      max-width: 900px;
      width: 100%;
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    h1 { margin-top: 0; }
    pre {
      background: rgba(255,255,255,.05);
      padding: 12px;
      border-radius: 8px;
      overflow-x: auto;
      font-family: monospace;
      font-size: 15px;
    }
    input {
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #555;
      background: #222;
      color: #fff;
      width: 200px;
    }
    button {
      padding: 10px 16px;
      margin-left: 8px;
      border: none;
      border-radius: 8px;
      background: #6c8cff;
      color: white;
      cursor: pointer;
      font-weight: bold;
    }
    .msg { margin-top: 10px; font-weight: bold; }
    .ok { color: #2ecc71; }
    .no { color: #ff5c7a; }
  </style>
</head>
<body>
  <div class="card">
    <h1>Zaszyfrowane pytanie</h1>
    <p>Odszyfruj najpierw Morse‚Äôa (litery = ‚Äû/‚Äù, s≈Çowa = ‚Äû//‚Äù), a potem u≈ºyj szyfru GA-DE-RY-PO-LU-KI.</p>
    <pre id="cipher"></pre>

    <div>
      <input id="odpowiedz" type="text" placeholder="Twoja odpowied≈∫‚Ä¶" />
      <button id="sprawdz">Sprawd≈∫</button>
    </div>
    <div class="msg" id="komunikat"></div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
  <script>
    // ===== KONFIG =====
    const PYTANIE_ORG = "Kt√≥ra to by≈Ça pielgrzymka ZHR?";
    const POPRAWNE = ["43"];
    const MSG_OK = "Brawo! To poprawna odpowied≈∫: 43 üéâ";
    const MSG_NO = "Nie tym razem. Spr√≥buj jeszcze raz.";

    // ===== FUNKCJE =====
    const stripDiacritics = s => s.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
    const GADERY = { G:"A", A:"G", D:"E", E:"D", R:"Y", Y:"R", P:"O", O:"P", L:"U", U:"L", K:"I", I:"K" };
    const applyGadery = s => s.split("").map(ch => {
      const up = ch.toUpperCase();
      if (GADERY[up]) {
        const mapped = GADERY[up];
        return (ch === ch.toUpperCase()) ? mapped : mapped.toLowerCase();
      }
      return ch;
    }).join("");

    const MORSE = {
      "A":".-", "B":"-...", "C":"-.-.", "D":"-..", "E":".", "F":"..-.", "G":"--.", "H":"....", "I":"..", "J":".---",
      "K":"-.-", "L":".-..", "M":"--", "N":"-.", "O":"---", "P":".--.", "Q":"--.-", "R":".-.", "S":"...", "T":"-",
      "U":"..-", "V":"...-", "W":".--", "X":"-..-", "Y":"-.--", "Z":"--..",
      "0":"-----", "1":".----", "2":"..---", "3":"...--", "4":"....-", "5":".....",
      "6":"-....", "7":"--...", "8":"---..", "9":"----.",
      "?":"..--.."
    };

    // Morse: litery "/" , s≈Çowa "//"
    const toMorse = s => {
      return s.split(" ").map(word =>
        word.split("").map(ch => {
          const up = ch.toUpperCase();
          return MORSE[up] || "";
        }).filter(Boolean).join(" / ")
      ).join(" // ");
    };

    // ===== GENEROWANIE ZAGADKI =====
    const pytanieBase = stripDiacritics(PYTANIE_ORG);
    const poGadery = applyGadery(pytanieBase);
    const morseFinal = toMorse(poGadery);
    document.getElementById("cipher").textContent = morseFinal;

    // ===== SPRAWDZANIE ODPOWIEDZI =====
    const input = document.getElementById("odpowiedz");
    const msg = document.getElementById("komunikat");
    document.getElementById("sprawdz").addEventListener("click", () => {
      const val = input.value.trim();
      if (POPRAWNE.includes(val)) {
        msg.textContent = MSG_OK;
        msg.className = "msg ok";
      } else {
        msg.textContent = MSG_NO;
        msg.className = "msg no";
      }
    });
  </script>
</body>
</html>
