<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Zagadka ZHR</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #1e3c72, #2a5298);
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
      overflow-x: hidden;
    }
    .card {
      background: rgba(255,255,255,0.08);
      backdrop-filter: blur(12px);
      border-radius: 20px;
      padding: 24px;
      max-width: 100%;
      box-shadow: 0 8px 30px rgba(0,0,0,.4);
      text-align: center;
    }
    h1 { margin-top: 0; font-size: 24px; }
    p.lead { color: #d0d6f5; font-size: 15px; }
    pre {
      background: rgba(0,0,0,.4);
      padding: 12px;
      border-radius: 12px;
      font-family: monospace;
      font-size: 14px;
      margin: 16px 0;
      color: #aee1ff;
      text-align: left;
      white-space: pre-wrap;
      word-wrap: break-word;
    }
    .controls { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; }
    input {
      padding: 10px;
      border-radius: 8px;
      border: none;
      outline: none;
      background: rgba(255,255,255,.15);
      color: #fff;
      width: 200px;
      font-size: 14px;
    }
    button {
      padding: 10px 16px;
      border: none;
      border-radius: 8px;
      background: linear-gradient(135deg, #6c8cff, #4a6ee0);
      color: white;
      cursor: pointer;
      font-weight: bold;
      font-size: 14px;
    }
    .msg { margin-top: 12px; font-weight: bold; font-size: 15px; }
    .ok { color: #2ecc71; }
    .no { color: #ff5c7a; }
    a { color: #ffd966; text-decoration: underline; }
    a:hover { color: #fff176; }
  </style>
</head>
<body>
  <div class="card">
    <h1>üîê Zaszyfrowane pytanie</h1>
    <p class="lead">Odszyfruj Morse‚Äôa, a potem spr√≥buj odpowiedzieƒá.</p>
    <pre id="cipher"></pre>

    <div class="controls">
      <input id="odpowiedz" type="text" placeholder="Twoja odpowied≈∫‚Ä¶" inputmode="numeric" />
      <button id="sprawdz">Sprawd≈∫</button>
    </div>
    <div class="msg" id="komunikat"></div>
  </div>

  <script>
    const PYTANIE_ORG = "Kt√≥ra to by≈Ça pielgrzymka ZHR?";
    const POPRAWNE = ["43"];
    const MSG_NO = "Nie tym razem. Spr√≥buj jeszcze raz.";
    const TEKST_HTML = `Szukaj w postach üòâüòâüòâ<br>
    Tu <a href="https://www.instagram.com/pielgrzymkazhr/" target="_blank" rel="noopener noreferrer">Instagram pielgrzymki</a>`;

    function normalizePolish(text) {
      return text.normalize("NFD").replace(/[\u0300-\u036f]/g, "")
        .replace(/≈Ç/g,"l").replace(/≈Å/g,"L")
        .replace(/ƒÖ/g,"a").replace(/ƒÑ/g,"A")
        .replace(/ƒô/g,"e").replace(/ƒò/g,"E")
        .replace(/≈õ/g,"s").replace(/≈ö/g,"S")
        .replace(/ƒá/g,"c").replace(/ƒÜ/g,"C")
        .replace(/≈Ñ/g,"n").replace(/≈É/g,"N")
        .replace(/√≥/g,"o").replace(/√ì/g,"O")
        .replace(/≈º/g,"z").replace(/≈ª/g,"Z")
        .replace(/≈∫/g,"z").replace(/≈π/g,"Z");
    }

    const GADERY = { G:"A", A:"G", D:"E", E:"D", R:"Y", Y:"R", P:"O", O:"P", L:"U", U:"L", K:"I", I:"K" };
    const applyGadery = s => s.split("").map(ch => {
      const up = ch.toUpperCase();
      if (GADERY[up]) {
        const mapped = GADERY[up];
        return (ch === ch.toUpperCase()) ? mapped : mapped.toLowerCase();
      }
      return ch;
    }).join("");

    const MORSE = {
      "A":".-","B":"-...","C":"-.-.","D":"-..","E":".","F":"..-.","G":"--.","H":"....","I":"..","J":".---",
      "K":"-.-","L":".-..","M":"--","N":"-.","O":"---","P":".--.","Q":"--.-","R":".-.","S":"...","T":"-",
      "U":"..-","V":"...-","W":".--","X":"-..-","Y":"-.--","Z":"--..",
      "0":"-----","1":".----","2":"..---","3":"...--","4":"....-","5":".....",
      "6":"-....","7":"--...","8":"---..","9":"----.",
      "?":"..--.."
    };

    function toMorse(text) {
      return text.split(" ").map(word =>
        word.split("").map(ch => MORSE[ch.toUpperCase()] || "")
          .filter(Boolean).join(" / ")
      ).join(" // ");
    }

    const pytanieBase = normalizePolish(PYTANIE_ORG);
    const poGadery = applyGadery(pytanieBase);
    document.getElementById("cipher").textContent = toMorse(poGadery);

    const input = document.getElementById("odpowiedz");
    const msg = document.getElementById("komunikat");

    function checkAnswer() {
      const val = (input.value || "").trim();
      if (POPRAWNE.includes(val)) {
        msg.innerHTML = TEKST_HTML;
        msg.className = "msg ok";
      } else {
        msg.textContent = MSG_NO;
        msg.className = "msg no";
      }
    }

    document.getElementById("sprawdz").addEventListener("click", checkAnswer);
    input.addEventListener("keydown", e => { if (e.key === "Enter") checkAnswer(); });
  </script>
</body>
</html>
